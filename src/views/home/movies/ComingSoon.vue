<template>
  <div class="coming">
    <div class="most-expected">
      <p class="title">近期最受期待</p>
      <div class="most-expected-list">
        <a class="expected-item" data-id="343034" href="/asgard/movie/343034">
          <div class="poster default-img-bg">
            <img
              src="https://p1.meituan.net/moviemachine/fdd380fb2f7f0f1742f9f7c8ae7c5fec7189073.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"
              ><span class="wish-num">1074655</span>人想看</span
            >
            <div class="toggle-wish" data-wishst="0" data-movieid="343034">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">速度与激情9</h5>
          <p class="date">5月21日</p>
        </a>

        <a class="expected-item" data-id="1250676" href="/asgard/movie/1250676">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/moviemachine/1109054df1f8614cee2a5ba957337df313876930.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">74089</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="1250676">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">了不起的老爸</h5>
          <p class="date">6月18日</p>
        </a>

        <a class="expected-item" data-id="247871" href="/asgard/movie/247871">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/movie/dc2fed6001e809e4553f90cc6fad9a59245170.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">282487</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="247871">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">我要我们在一起</h5>
          <p class="date">5月20日</p>
        </a>

        <a class="expected-item" data-id="1336183" href="/asgard/movie/1336183">
          <div class="poster default-img-bg">
            <img
              src="https://p1.meituan.net/movie/63cb3dbbaff624b236b2e22b2ee59cff1553093.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">120299</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="1336183">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">1921</h5>
          <p class="date">7月1日</p>
        </a>

        <a class="expected-item" data-id="1319" href="/asgard/movie/1319">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/moviemachine/8503c98fa2a02df648f6a59448c4c99078837.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">109155</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="1319">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">情书</h5>
          <p class="date">5月20日</p>
        </a>

        <!-- <a class="expected-item" data-id="1302134" href="/asgard/movie/1302134">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/movie/69291d617c3dc5dcac5e3bf29dda63ac2200192.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">198051</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="1302134">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">哆啦A梦：伴我同行2</h5>
          <p class="date">5月28日</p>
        </a>

        <a class="expected-item" data-id="1218187" href="/asgard/movie/1218187">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/movie/10a07ab32c653bbd391fc31da8e102bc2384848.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">179756</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="1218187">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">感动她77次</h5>
          <p class="date">5月14日</p>
        </a>

        <a class="expected-item" data-id="1278598" href="/asgard/movie/1278598">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/movie/79bec9587f3737e29789f7ede72bd8d23177040.png@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">76209</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="1278598">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">你好世界</h5>
          <p class="date">6月11日</p>
        </a>

        <a class="expected-item" data-id="428" href="/asgard/movie/428">
          <div class="poster default-img-bg">
            <img
              src="https://p0.meituan.net/moviemachine/b183a9143031dd4aab5ca95affe410f2579878.jpg@1l_1e_1c_170w_230h"
              onerror="this.style.visibility='hidden'"
            />
            <span class="wish-bg"></span>
            <span class="wish"><span class="wish-num">51481</span>人想看</span>
            <div class="toggle-wish" data-wishst="0" data-movieid="428">
              <span></span>
            </div>
          </div>
          <h5 class="name line-ellipsis">指环王：王者无敌</h5>
          <p class="date">5月14日</p>
        </a> -->
      </div>
    </div>

    <!-- <div class="top-rated" v-html="mostExpected">
    </div> -->
    <div class="coming-list">

    <MovieList :movie-list="movieList"></MovieList>
    </div>
  </div>
</template>

<script>
import MovieList from "@/components/MovieList";

export default {
  props: {
    movieList: {
      type: Array,
    },
  },
  components: {
    MovieList,
  },
  data() {
    return {
      mostExpected: "",
      offset: 0,
      ct: "北京",
      ci: 538,
    };
  },
  async mounted() {
    let res = await this.$http.get({
      url: "/ajax/mostExpected",
      params: {
        ci: 538,
        limit: 10,
        offset: 20,
        token: "",
        optimus_uuid:
          "E9BCBEC0B19011EBBAC951137EF88335E6CF5EC540F142168F1F3FAA52629EB9",
        optimus_risk_level: 71,
        optimus_code: 10,
      },
    });
    // let res = await axios.get('https://m.maoyan.com/ajax/topRatedMovies')
    console.log(res);
    this.mostExpected = res;
  },
};
</script>

<style lang="stylus" scoped>
.coming
  background-color #f5f5f5
  margin-top 0
  .most-expected
    padding 12px 0 12px 15px
    background-color #fff
    margin-bottom 10px
    .title
      margin 0
      font-size 14px
      color #333
      margin-bottom 12px
    .most-expected-list
      overflow scroll
      white-space nowrap
      .expected-item
        display inline-block
        width 85px
        overflow hidden
        margin-right 10px
        .poster
          width 85px
          height 115px
          position relative
          margin-bottom 6px
        .default-img-bg 
          background-color #e1e1e1
          background-size 100% 100%
          img 
            width 100%
            height 100%
            display block
          .wish-bg
            display inline-block
            width 100%
            height 35px
            position: absolute
            bottom: 0
            background-image linear-gradient(-180deg,rgba(77,77,77,0),#000)
          .wish
              position absolute
              left 4px
              bottom 2px
              color #faaf00
              font-size: 11px;
              font-weight: 600;
              .wish-num
                color: #faaf00;
                font-size: 11px;
                font-weight: 600;
          .toggle-wish
            width: 28px;
            line-height: 28px;
            background: rgba(61,63,71,.6);
            text-align: center;
            border-bottom-right-radius: 10px;
            position: absolute;
            top: 0;
            left: 0;
        .name
          margin: 0;
          font-size: 13px;
          color: #222;
          margin-bottom: 3px; 
        .line-ellipsis
          text-overflow: ellipsis;
          overflow: hidden;
          white-space: nowrap;
        .date
          margin: 0;
          font-size: 12px;
          color: #999;
  .coming-list
      background-color #fff
      
</style>
